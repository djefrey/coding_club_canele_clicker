<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="main.css">
    <title>Canelé Clicker</title>
  </head>
  <body>
    <h1>Canelé Clicker</h1>

    <center><img src="canele.jpg" alt="Canele" id="canele_img"></center>

    <p id="golden_canele">Un canelé doré est apparu !</p>

    <div class="interface">
      <br>

      <p>Vous avez <span id="n_canele">0</span> canelé(s) !</p>
      <p>Vous avez <span id="n_furnace">0</span> four(s) en service !</p>

      <button name="cook" onclick="cookCanele()">Cuisiner</button>

      <button name="buy_furnace" onclick="buyFurnace()">Acheter un four (<span id="price_furnace">25</span> canelés)</button>

      <p></p>
    </div>

    <script>
    var hasBeenInit = false;

    var n_canele = 0;

    var n_furnace = 0;
    var price_furnace = 25;

    function init(){
      hasBeenInit = true;
      setInterval(hideGoldenCanele, 50);
    }

    function cookCanele()
    {
      if(!hasBeenInit){
        init();
      }

      var rand = Math.random();
      if(rand >= 0.50){
        n_canele += 5;
        goldenCanale();
      }else{
        n_canele++;
      }

      document.getElementById('n_canele').innerHTML = n_canele;
    }

    function buyFurnace() {
      if (n_canele >= price_furnace) {
        n_canele -= price_furnace;

        n_furnace++;
        price_furnace = 25 + n_furnace * n_furnace * 2;

        document.getElementById('n_furnace').innerHTML = n_furnace;
        document.getElementById('price_furnace').innerHTML = price_furnace;
        document.getElementById('n_canele').innerHTML = n_canele;

        setInterval(cookCanele, 1000);
      }
    }

    var opacity = 0;

    function goldenCanale(){
      opacity = 1;
    }

    function hideGoldenCanele()
    {
      if(opacity > 0){
        opacity -= 0.025;
        document.getElementById('golden_canele').style.opacity = opacity;
      }
    }
    </script>
  </body>
</html>
